<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â¤ï¸ 235å¤©çš„çˆ± - éŸ³ä¹èŠ‚å¥æ¸¸æˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        /* èƒŒæ™¯åŠ¨ç”» */
        .background {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            animation: gradientShift 8s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(30deg); }
        }

        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            color: rgba(255, 255, 255, 0.3);
            font-size: 20px;
            animation: float 6s linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* å¼€å§‹å±å¹• */
        .start-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .start-screen.hidden {
            display: none;
        }

        .title {
            font-size: 64px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 30px rgba(255, 105, 180, 0.8);
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .subtitle {
            font-size: 28px;
            color: #ffd700;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        }

        .description {
            font-size: 18px;
            color: #fff;
            margin-bottom: 40px;
            text-align: center;
            max-width: 600px;
            line-height: 1.6;
        }

        .start-btn {
            padding: 20px 60px;
            font-size: 28px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(135deg, #ff6b9d 0%, #c06c84 100%);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.5);
            transition: all 0.3s ease;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .start-btn:hover {
            transform: scale(1.1) translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.7);
        }

        /* æ¸¸æˆç•Œé¢ */
        .game-area {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
        }

        .game-area.active {
            display: block;
        }

        /* åˆ†æ•°å’Œä¿¡æ¯æ  */
        .info-bar {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 40px;
            z-index: 10;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 20px;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .score {
            font-size: 36px;
            color: #ffd700;
        }

        /* æ¸¸æˆç›®æ ‡åœ†åœˆ */
        .target {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .target::before {
            content: 'â™¥';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            color: #fff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            pointer-events: none;
        }


        .target.pink {
            background: radial-gradient(circle, #ff6b9d, #c06c84);
            border: 4px solid #fff;
        }

        .target.purple {
            background: radial-gradient(circle, #a770ef, #764ba2);
            border: 4px solid #fff;
        }

        .target.gold {
            background: radial-gradient(circle, #ffd700, #ffaa00);
            border: 4px solid #fff;
        }

        /* ç‚¹å‡»æ•ˆæœ */
        .hit-effect {
            position: absolute;
            pointer-events: none;
            font-size: 32px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            animation: hitAnim 0.8s ease-out forwards;
            z-index: 1000;
        }

        @keyframes hitAnim {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(2) translateY(-50px);
                opacity: 0;
            }
        }

        /* è¿å‡»æ˜¾ç¤º */
        .combo {
            position: absolute;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            z-index: 20;
            display: none;
        }

        .combo.show {
            display: block;
            animation: comboAnim 0.5s ease-out;
        }

        @keyframes comboAnim {
            0% { transform: translateX(-50%) scale(0.5); }
            50% { transform: translateX(-50%) scale(1.2); }
            100% { transform: translateX(-50%) scale(1); }
        }

        /* ç»“æŸå±å¹• */
        .end-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .end-screen.show {
            display: flex;
        }

        .end-title {
            font-size: 72px;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
        }

        .end-title.win {
            color: #ffd700;
            animation: winAnim 1s ease-in-out infinite;
        }

        .end-title.lose {
            color: #ff6b9d;
        }

        @keyframes winAnim {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(5deg); }
        }

        .end-message {
            font-size: 32px;
            color: #fff;
            margin-bottom: 20px;
            text-align: center;
            max-width: 600px;
            line-height: 1.6;
        }

        .final-score {
            font-size: 48px;
            color: #ffd700;
            margin-bottom: 40px;
        }

        .restart-btn {
            padding: 20px 60px;
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="background"></div>
        <div class="hearts" id="hearts"></div>

        <!-- å¼€å§‹å±å¹• -->
        <div class="start-screen" id="startScreen">
            <div class="title">â¤ï¸ 235å¤©çš„çˆ± â¤ï¸</div>
            <div class="subtitle">ğŸµ éŸ³ä¹èŠ‚å¥æ¸¸æˆ ğŸµ</div>
            <div class="description">
                åœ¨æˆ‘ä»¬ç›¸çˆ±çš„ç¬¬235å¤©ï¼Œ<br>
                è®©æˆ‘ä»¬ç”¨éŸ³ä¹æ¥åº†ç¥è¿™ä»½ç¾å¥½ï¼<br>
                <br>
                ğŸ¯ æ¸¸æˆè§„åˆ™ï¼š<br>
                â€¢ ç‚¹å‡»å±å¹•ä¸Šå‡ºç°çš„çˆ±å¿ƒ<br>
                â€¢ çˆ±å¿ƒä¼šé€æ¸ç¼©å°ï¼Œè¶Šå°è¶Šéš¾ç‚¹<br>
                â€¢ åœ¨æœ€ä½³æ—¶æœºç‚¹å‡»è·å¾—å®Œç¾åˆ¤å®š<br>
                â€¢ é”™è¿‡çˆ±å¿ƒä¼šé‡ç½®è¿å‡»<br>
                <br>
                â­ è¯„åˆ†ç³»ç»Ÿï¼š<br>
                GOOD +1åˆ† | PERFECT +2åˆ†<br>
                æ¯10è¿å‡»é¢å¤–+1åˆ†<br>
                è¾¾åˆ°235åˆ†é€šå…³ï¼(45ç§’é™æ—¶)
            </div>
            <button class="start-btn" onclick="startGame()">å¼€å§‹æ¸¸æˆ â–¶</button>
        </div>

        <!-- æ¸¸æˆåŒºåŸŸ -->
        <div class="game-area" id="gameArea">
            <div class="info-bar">
                <div class="info-item">æ—¶é—´: <span id="timer">45</span>s</div>
                <div class="info-item score">åˆ†æ•°: <span id="score">0</span></div>
                <div class="info-item">è¿å‡»: <span id="combo">0</span></div>
            </div>
            <div class="combo" id="comboDisplay">0 COMBO!</div>
            <div id="targets"></div>
        </div>

        <!-- ç»“æŸå±å¹• -->
        <div class="end-screen" id="endScreen">
            <div class="end-title" id="endTitle">æ­å–œé€šå…³ï¼</div>
            <div class="end-message" id="endMessage">
                æˆ‘ä»¬çš„çˆ±æƒ…å°±åƒè¿™ä¸ªæ¸¸æˆä¸€æ ·ï¼Œ<br>
                å……æ»¡äº†èŠ‚å¥å’Œç¾å¥½ï¼<br>
                æ„¿æˆ‘ä»¬çš„235å¤©åªæ˜¯å¼€å§‹ï¼Œ<br>
                æœªæ¥è¿˜æœ‰æ— æ•°ä¸ª235å¤©ï¼
            </div>
            <div class="final-score">æœ€ç»ˆåˆ†æ•°: <span id="finalScore">0</span></div>
            <button class="restart-btn" onclick="restartGame()">å†ç©ä¸€æ¬¡ â™»</button>
        </div>
    </div>

    <script>
        let score = 0;
        let combo = 0;
        let timeLeft = 45; // ç¼©çŸ­åˆ°45ç§’
        let gameActive = false;
        let timerInterval;
        let spawnInterval;
        let targetId = 0;
        let perfectHits = 0;
        let totalHits = 0;

        // åˆ›å»ºé£˜è½çš„çˆ±å¿ƒèƒŒæ™¯
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('hearts');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.textContent = 'â¤ï¸';
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
                heartsContainer.appendChild(heart);
                
                setTimeout(() => heart.remove(), 6000);
            }, 500);
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.add('active');
            
            score = 0;
            combo = 0;
            timeLeft = 45;
            gameActive = true;
            targetId = 0;
            perfectHits = 0;
            totalHits = 0;
            
            updateDisplay();
            
            // å¼€å§‹è®¡æ—¶å™¨
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endGame(false);
                }
            }, 1000);
            
            // å¼€å§‹ç”Ÿæˆç›®æ ‡ - æ›´å¿«çš„èŠ‚å¥
            spawnTargets();
            spawnInterval = setInterval(spawnTargets, 1200);
        }

        // ç”Ÿæˆç›®æ ‡
        function spawnTargets() {
            if (!gameActive) return;
            
            // æ¯æ¬¡ç”Ÿæˆ2-3ä¸ªç›®æ ‡
            const numTargets = Math.random() > 0.5 ? 3 : 2;
            
            for (let i = 0; i < numTargets; i++) {
                setTimeout(() => {
                    if (!gameActive) return;
                    
                    const target = document.createElement('div');
                    target.className = 'target';
                    target.id = 'target-' + targetId++;
                    
                    // éšæœºç±»å‹ï¼ˆä»…ç”¨äºè§†è§‰æ•ˆæœï¼‰
                    const rand = Math.random();
                    let type;
                    if (rand < 0.4) {
                        type = 'pink';
                    } else if (rand < 0.8) {
                        type = 'purple';
                    } else {
                        type = 'gold';
                    }
                    
                    target.classList.add(type);
                    
                    // åˆå§‹å¤§å°è¾ƒå¤§ï¼Œä¼šé€æ¸ç¼©å°
                    const initialSize = 120;
                    target.style.width = initialSize + 'px';
                    target.style.height = initialSize + 'px';
                    target.dataset.initialSize = initialSize;
                    
                    // éšæœºä½ç½®
                    const maxX = window.innerWidth - initialSize - 40;
                    const maxY = window.innerHeight - initialSize - 200;
                    const minY = 150;
                    
                    target.style.left = (Math.random() * maxX + 20) + 'px';
                    target.style.top = (Math.random() * (maxY - minY) + minY) + 'px';
                    
                    // ç‚¹å‡»äº‹ä»¶
                    target.addEventListener('click', () => hitTarget(target));
                    
                    // æ·»åŠ åˆ°æ¸¸æˆåŒºåŸŸ
                    document.getElementById('targets').appendChild(target);
                    
                    // æ·¡å…¥åŠ¨ç”»
                    target.style.opacity = '0';
                    target.style.transform = 'scale(0)';
                    setTimeout(() => {
                        target.style.transition = 'opacity 0.2s ease';
                        target.style.opacity = '1';
                        target.style.transform = 'scale(1)';
                    }, 10);
                    
                    // å¼€å§‹ç¼©å°åŠ¨ç”»ï¼ˆ2ç§’å†…ç¼©å°åˆ°30%ï¼‰
                    const shrinkDuration = 2000;
                    const startTime = Date.now();
                    const shrinkInterval = setInterval(() => {
                        if (!target.parentNode || !gameActive) {
                            clearInterval(shrinkInterval);
                            return;
                        }
                        
                        const elapsed = Date.now() - startTime;
                        const progress = Math.min(elapsed / shrinkDuration, 1);
                        
                        // ä»100%ç¼©å°åˆ°30%
                        const scale = 1 - (progress * 0.7);
                        const newSize = initialSize * scale;
                        target.style.width = newSize + 'px';
                        target.style.height = newSize + 'px';
                        target.dataset.currentSize = newSize;
                        
                        if (progress >= 1) {
                            clearInterval(shrinkInterval);
                        }
                    }, 16);
                    
                    // 2.2ç§’åæ¶ˆå¤±ï¼ˆå¦‚æœæ²¡è¢«ç‚¹å‡»ï¼‰
                    setTimeout(() => {
                        if (target.parentNode) {
                            // é”™è¿‡ç›®æ ‡ï¼Œé‡ç½®è¿å‡»
                            combo = 0;
                            updateDisplay();
                            
                            target.style.transition = 'all 0.2s ease';
                            target.style.opacity = '0';
                            target.style.transform = 'scale(0)';
                            setTimeout(() => {
                                if (target.parentNode) {
                                    target.remove();
                                }
                            }, 200);
                        }
                    }, 2200);
                }, i * 150);
            }
        }

        // å‡»ä¸­ç›®æ ‡
        function hitTarget(target) {
            if (!gameActive || !target.parentNode) return;
            
            // åˆ¤æ–­æ˜¯å¦å®Œç¾ç‚¹å‡»ï¼ˆåŸºäºå½“å‰å¤§å°ï¼‰
            const currentSize = parseFloat(target.dataset.currentSize || target.dataset.initialSize);
            const initialSize = parseFloat(target.dataset.initialSize);
            const sizeRatio = currentSize / initialSize;
            
            let points = 1; // åŸºç¡€åˆ†
            let isPerfect = false;
            
            // å½“ç›®æ ‡å¤§å°åœ¨60%-80%ä¹‹é—´æ—¶ä¸ºå®Œç¾ç‚¹å‡»
            if (sizeRatio >= 0.6 && sizeRatio <= 0.8) {
                points = 2;
                isPerfect = true;
                perfectHits++;
            }
            
            // å¢åŠ åˆ†æ•°å’Œè¿å‡»
            score += points;
            combo++;
            totalHits++;
            
            // æ¯10ä¸ªcomboé¢å¤–+1åˆ†
            if (combo % 10 === 0) {
                score += 1;
                showComboBonus(target);
            }
            
            // æ˜¾ç¤ºå¾—åˆ†æ•ˆæœ
            const effect = document.createElement('div');
            effect.className = 'hit-effect';
            if (isPerfect) {
                effect.textContent = 'PERFECT +2';
                effect.style.color = '#ffd700';
            } else {
                effect.textContent = 'GOOD +1';
                effect.style.color = '#fff';
            }
            effect.style.left = target.style.left;
            effect.style.top = target.style.top;
            document.getElementById('targets').appendChild(effect);
            
            setTimeout(() => effect.remove(), 800);
            
            // æ˜¾ç¤ºè¿å‡»
            if (combo > 1) {
                const comboDisplay = document.getElementById('comboDisplay');
                comboDisplay.textContent = combo + ' COMBO!';
                comboDisplay.classList.remove('show');
                void comboDisplay.offsetWidth; // å¼ºåˆ¶é‡ç»˜
                comboDisplay.classList.add('show');
            }
            
            // ç§»é™¤ç›®æ ‡
            target.style.transform = 'scale(0)';
            setTimeout(() => {
                if (target.parentNode) {
                    target.remove();
                }
            }, 100);
            
            updateDisplay();
            
            // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°235åˆ†
            if (score >= 235) {
                endGame(true);
            }
        }

        // æ˜¾ç¤ºè¿å‡»å¥–åŠ±
        function showComboBonus(target) {
            const effect = document.createElement('div');
            effect.className = 'hit-effect';
            effect.textContent = 'COMBO BONUS +1';
            effect.style.color = '#ff69b4';
            effect.style.fontSize = '24px';
            effect.style.left = target.style.left;
            effect.style.top = (parseFloat(target.style.top) + 40) + 'px';
            document.getElementById('targets').appendChild(effect);
            
            setTimeout(() => effect.remove(), 800);
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('combo').textContent = combo;
        }

        // ç»“æŸæ¸¸æˆ
        function endGame(win) {
            gameActive = false;
            clearInterval(timerInterval);
            clearInterval(spawnInterval);
            
            // æ¸…é™¤æ‰€æœ‰ç›®æ ‡
            document.getElementById('targets').innerHTML = '';
            
            // æ˜¾ç¤ºç»“æŸå±å¹•
            const endScreen = document.getElementById('endScreen');
            const endTitle = document.getElementById('endTitle');
            const endMessage = document.getElementById('endMessage');
            
            document.getElementById('finalScore').textContent = score;
            
            const accuracy = totalHits > 0 ? ((perfectHits / totalHits) * 100).toFixed(1) : 0;
            
            if (win) {
                endTitle.textContent = 'ğŸ‰ æ­å–œé€šå…³ï¼ğŸ‰';
                endTitle.className = 'end-title win';
                endMessage.innerHTML = `
                    æˆ‘ä»¬çš„çˆ±æƒ…å°±åƒè¿™ä¸ªæ¸¸æˆä¸€æ ·ï¼Œ<br>
                    å……æ»¡äº†èŠ‚å¥å’Œç¾å¥½ï¼<br>
                    å®Œç¾ç‡: ${accuracy}% | æœ€é«˜è¿å‡»: ${combo}<br>
                    æ„¿æˆ‘ä»¬çš„235å¤©åªæ˜¯å¼€å§‹ï¼Œ<br>
                    æœªæ¥è¿˜æœ‰æ— æ•°ä¸ª235å¤©ï¼â¤ï¸
                `;
            } else {
                endTitle.textContent = 'ğŸ’” æ—¶é—´åˆ°ï¼ğŸ’”';
                endTitle.className = 'end-title lose';
                endMessage.innerHTML = `
                    è™½ç„¶è¿™æ¬¡æ²¡æœ‰è¾¾åˆ°235åˆ†ï¼Œ<br>
                    ä½†æˆ‘ä»¬çš„çˆ±æƒ…æ°¸è¿œä¸ä¼šç»“æŸï¼<br>
                    å¾—åˆ†: ${score} | å®Œç¾ç‡: ${accuracy}%<br>
                    å†è¯•ä¸€æ¬¡å§ï¼åŠ æ²¹ï¼ğŸ’ª
                `;
            }
            
            endScreen.classList.add('show');
        }

        // é‡æ–°å¼€å§‹
        function restartGame() {
            document.getElementById('endScreen').classList.remove('show');
            document.getElementById('gameArea').classList.remove('active');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        // åˆå§‹åŒ–
        createFloatingHearts();
    </script>
</body>
</html>
